<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>How to use Groovy sources from Java in Gradle projects | Jonas Havers</title>
    <meta name="description" content="To use Java sources from Groovy as well as Groovy sources from Java you have to change the default Gradle SourceSet configuration.">
    <meta http-equiv="content-type" content="text/html; charset:UTF-8">
  <meta name="x-ua-compatible" content="IE:edge">
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta http-equiv="cleartype" content="on">
  <meta name="theme-color" content="#3C3C3B">
  <meta name="msapplication-TileColor" content="#3C3C3B">
  <meta name="author" content="Jonas Havers">
  <meta property="og:site_name" content="jonas-havers.de">
  <meta property="og:locale" content="en_US">
  <meta property="og:url" content="https://jonas-havers.de">
  <meta property="og:image" content="https://jonas-havers.de/jonas-havers.jpg">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary">
  <meta name="twitter:creator" content="@JonasHavers">
  <meta name="twitter:site" content="@JonasHavers">
  <meta name="twitter:url" content="https://jonas-havers.de">
    <meta name="keywords" content="Gradle,Groovy,Java,Project Setup,Gradle Configuration">
    <link rel="preload" href="/assets/css/0.styles.37ebc109.css" as="style"><link rel="preload" href="/assets/js/app.e42eebfe.js" as="script"><link rel="preload" href="/assets/js/6.e7f0fcb3.js" as="script"><link rel="preload" href="/assets/js/1.7959f0b7.js" as="script"><link rel="preload" href="/assets/js/19.df510d15.js" as="script"><link rel="prefetch" href="/assets/js/2.45d418fc.js"><link rel="prefetch" href="/assets/js/3.04b88f49.js"><link rel="prefetch" href="/assets/js/4.e7084cf5.js"><link rel="prefetch" href="/assets/js/5.437fa337.js"><link rel="prefetch" href="/assets/js/7.4d598085.js"><link rel="prefetch" href="/assets/js/8.1d032926.js"><link rel="prefetch" href="/assets/js/9.ee958c6f.js"><link rel="prefetch" href="/assets/js/10.a35e87c5.js"><link rel="prefetch" href="/assets/js/11.f05f231d.js"><link rel="prefetch" href="/assets/js/12.3829ce77.js"><link rel="prefetch" href="/assets/js/13.0c92c138.js"><link rel="prefetch" href="/assets/js/14.cb0adfbf.js"><link rel="prefetch" href="/assets/js/15.e78cff2c.js"><link rel="prefetch" href="/assets/js/16.1cb616e4.js"><link rel="prefetch" href="/assets/js/17.e39af442.js"><link rel="prefetch" href="/assets/js/18.6857e041.js"><link rel="prefetch" href="/assets/js/20.3e4240c8.js"><link rel="prefetch" href="/assets/js/21.1f91c728.js"><link rel="prefetch" href="/assets/js/22.ff2d308a.js"><link rel="prefetch" href="/assets/js/23.92edfe0a.js"><link rel="prefetch" href="/assets/js/24.0935d12d.js"><link rel="prefetch" href="/assets/js/25.5906a4e0.js"><link rel="prefetch" href="/assets/js/26.a721d668.js"><link rel="prefetch" href="/assets/js/27.4e9a794b.js"><link rel="prefetch" href="/assets/js/28.b68a5168.js"><link rel="prefetch" href="/assets/js/29.b94d97d5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.37ebc109.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="Jonas Havers" class="logo"> <span class="site-name can-hide">Jonas Havers</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">Articles</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Profiles</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/JonasHavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JonasHavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://medium.com/@jonashavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/jonashavers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.xing.com/profile/Jonas_Havers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XING
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/articles/" class="nav-link router-link-active">Articles</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Profiles</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://twitter.com/JonasHavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://github.com/JonasHavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://medium.com/@jonashavers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Medium
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.linkedin.com/in/jonashavers/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  LinkedIn
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li><li class="dropdown-item"><!----> <a href="https://www.xing.com/profile/Jonas_Havers" target="_blank" rel="noopener noreferrer" class="nav-link external">
  XING
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="content default"><h1 id="how-to-use-groovy-sources-from-java-in-gradle-projects">How to use Groovy sources from Java in Gradle projects</h1> <p>When you want to use Java sources from Groovy, there is no need to change the default configuration after applying the Gradle Groovy plugin:</p> <div class="language-groovy extra-class"><pre class="language-groovy"><code>apply plugin<span class="token punctuation">:</span> <span class="token string">'groovy'</span>

repositories <span class="token punctuation">{</span>
  <span class="token function">mavenCentral</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

dependencies <span class="token punctuation">{</span>
  compile <span class="token string">'org.codehaus.groovy:groovy-all:2.4.15'</span>
<span class="token punctuation">}</span>
</code></pre></div><p>When you want to do things the other way around, the defaults cause the compiler to complain that it cannot find Groovy stuff within your project.</p> <p>So to use Java sources from Groovy as well as Groovy sources from Java, both your Java and Groovy source files must be compiled using the Groovy compiler. By default, the Java sources are compiled by the Java compiler and passed along to the Groovy compiler.</p> <h2 id="solutions">Solutions</h2> <p>You can change this behaviour using one of the following solutions.</p> <h3 id="_1-change-the-default-gradle-sourcesets">1. Change the default Gradle SourceSets</h3> <p>By applying the following configuration to the <code>build.gradle</code> of your Gradle project, you change the default <a href="https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html" target="_blank" rel="noopener noreferrer">Gradle SourceSets<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> directories that are being used during compilation:</p> <div class="language-groovy extra-class"><div class="highlight-lines"><br><br><div class="highlighted"> </div><div class="highlighted"> </div><br><br><br></div><pre class="language-groovy"><code>sourceSets <span class="token punctuation">{</span>
  main <span class="token punctuation">{</span>
    java <span class="token punctuation">{</span> srcDirs <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
    groovy <span class="token punctuation">{</span> srcDirs <span class="token operator">+=</span> <span class="token punctuation">[</span><span class="token string">'src/main/java'</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Afterwards, the default Java SourceSet <code>src/main/java</code> is not managed by the Java plugin anymore. All source files are handled by the Groovy compiler.</p> <h3 id="_2-put-all-your-java-files-into-the-default-groovy-source-directory">2. Put all your Java files into the default Groovy source directory</h3> <p>Another solution to use Groovy sources from Java is to place all your Java sources next to the Groovy files in the <code>src/main/groovy</code> directory and get rid of <code>src/main/java</code>.</p> <hr> <h2 id="why-is-that">Why is that?</h2> <p>The <a href="https://docs.gradle.org/current/userguide/groovy_plugin.html" target="_blank" rel="noopener noreferrer">Groovy Gradle plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> extends the <a href="https://docs.gradle.org/current/userguide/java_plugin.html" target="_blank" rel="noopener noreferrer">Java plugin<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> to add Groovy compilation capabilities. If you apply the Groovy Gradle plugin to your project, the Java plugin will also be applied, if it has not already been applied.</p> <p>By default, the sources inside <code>src/main/java</code> are handled by the Java plugin. It uses the Java <code>javac</code> compiler when executing the Gradle task <code>compileJava</code>. The <code>compileTestJava</code> task further looks for Java test source files in the default <code>src/test/java</code> directory.</p> <p>Groovy's Gradle plugin extends the Java plugin's compilation and looks for source files in the directory <code>src/main/groovy</code> when executing <code>compileGroovy</code>. The <code>compileTestGroovy</code> task looks for test source files in the <code>src/test/groovy</code>directory.</p> <p>If you move your Java files over to <code>src/main/groovy</code> as described in the second solution they will be handled by the Groovy plugin. The Groovy plugin uses <code>groovyc</code>, the Groovy compiler. It makes use of the <a href="http://groovy-lang.org/groovyc.html#section-jointcompilation" target="_blank" rel="noopener noreferrer"><em>joint compilation</em><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> feature which allows you to mix and match Groovy and Java code in the Groovy SourceSet directories. For example, a Groovy class can extend a Java class that in turn extends a Groovy class. You can have dependencies in both directions and choose the best language for the job. Furthermore, you can incrementally rewrite and migrate any class to the other language if needed.</p> <p>If you change the Groovy SourceSet as described in the first solution, the joint-compilation takes effect in both the default <code>src/main/groovy</code> and the added <code>src/main/java</code> directory. It doesn't matter which directory you put the Java and Groovy files in.</p> <hr> <p>If you want to try it on your own, I have prepared a <a href="https://github.com/JonasHavers/groovier-java-compilation" target="_blank" rel="noopener noreferrer">sample project on Github<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> that you can use as a reference.</p></div> <!----> <!----> </main> <footer data-v-10fc90dc>
  Copyright © Jonas Havers – <a href="/legal-notice/" data-v-10fc90dc>Legal Notice</a></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/6.e7f0fcb3.js" defer></script><script src="/assets/js/1.7959f0b7.js" defer></script><script src="/assets/js/19.df510d15.js" defer></script><script src="/assets/js/app.e42eebfe.js" defer></script>
  </body>
</html>

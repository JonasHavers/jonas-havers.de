(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{244:function(t,e,o){"use strict";o.r(e);var a=o(2),r=Object(a.a)({},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[o("h1",{attrs:{id:"how-to-use-groovy-sources-from-java-in-gradle-projects"}},[t._v("How to use Groovy sources from Java in Gradle projects")]),t._v(" "),o("p",[t._v("When you want to use Java sources from Groovy, there is no need to change the default configuration after applying the Gradle Groovy plugin:")]),t._v(" "),o("div",{staticClass:"language-groovy extra-class"},[o("pre",{pre:!0,attrs:{class:"language-groovy"}},[o("code",[t._v("apply plugin"),o("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),o("span",{attrs:{class:"token string"}},[t._v("'groovy'")]),t._v("\n\nrepositories "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),o("span",{attrs:{class:"token function"}},[t._v("mavenCentral")]),o("span",{attrs:{class:"token punctuation"}},[t._v("(")]),o("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\ndependencies "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  compile "),o("span",{attrs:{class:"token string"}},[t._v("'org.codehaus.groovy:groovy-all:2.4.15'")]),t._v("\n"),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),o("p",[t._v("When you want to do things the other way around, the defaults cause the compiler to complain that it cannot find Groovy stuff within your project.")]),t._v(" "),o("p",[t._v("So to use Java sources from Groovy as well as Groovy sources from Java, both your Java and Groovy source files must be compiled using the Groovy compiler. By default, the Java sources are compiled by the Java compiler and passed along to the Groovy compiler.")]),t._v(" "),o("h2",{attrs:{id:"solutions"}},[t._v("Solutions")]),t._v(" "),o("p",[t._v("You can change this behaviour using one of the following solutions.")]),t._v(" "),o("h3",{attrs:{id:"_1-change-the-default-gradle-sourcesets"}},[t._v("1. Change the default Gradle SourceSets")]),t._v(" "),o("p",[t._v("By applying the following configuration to the "),o("code",[t._v("build.gradle")]),t._v(" of your Gradle project, you change the default "),o("a",{attrs:{href:"https://docs.gradle.org/current/dsl/org.gradle.api.tasks.SourceSet.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Gradle SourceSets"),o("OutboundLink")],1),t._v(" directories that are being used during compilation:")]),t._v(" "),o("div",{staticClass:"language-groovy extra-class"},[o("div",{staticClass:"highlight-lines"},[o("br"),o("br"),o("div",{staticClass:"highlighted"},[t._v(" ")]),o("div",{staticClass:"highlighted"},[t._v(" ")]),o("br"),o("br"),o("br")]),o("pre",{pre:!0,attrs:{class:"language-groovy"}},[o("code",[t._v("sourceSets "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  main "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    java "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" srcDirs "),o("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),o("span",{attrs:{class:"token punctuation"}},[t._v("[")]),o("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    groovy "),o("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" srcDirs "),o("span",{attrs:{class:"token operator"}},[t._v("+=")]),t._v(" "),o("span",{attrs:{class:"token punctuation"}},[t._v("[")]),o("span",{attrs:{class:"token string"}},[t._v("'src/main/java'")]),o("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),o("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),o("p",[t._v("Afterwards, the default Java SourceSet "),o("code",[t._v("src/main/java")]),t._v(" is not managed by the Java plugin anymore. All source files are handled by the Groovy compiler.")]),t._v(" "),o("h3",{attrs:{id:"_2-put-all-your-java-files-into-the-default-groovy-source-directory"}},[t._v("2. Put all your Java files into the default Groovy source directory")]),t._v(" "),o("p",[t._v("Another solution to use Groovy sources from Java is to place all your Java sources next to the Groovy files in the "),o("code",[t._v("src/main/groovy")]),t._v(" directory and get rid of "),o("code",[t._v("src/main/java")]),t._v(".")]),t._v(" "),o("hr"),t._v(" "),o("h2",{attrs:{id:"why-is-that"}},[t._v("Why is that?")]),t._v(" "),o("p",[t._v("The "),o("a",{attrs:{href:"https://docs.gradle.org/current/userguide/groovy_plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Groovy Gradle plugin"),o("OutboundLink")],1),t._v(" extends the "),o("a",{attrs:{href:"https://docs.gradle.org/current/userguide/java_plugin.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Java plugin"),o("OutboundLink")],1),t._v(" to add Groovy compilation capabilities. If you apply the Groovy Gradle plugin to your project, the Java plugin will also be applied, if it has not already been applied.")]),t._v(" "),o("p",[t._v("By default, the sources inside "),o("code",[t._v("src/main/java")]),t._v(" are handled by the Java plugin. It uses the Java "),o("code",[t._v("javac")]),t._v(" compiler when executing the Gradle task "),o("code",[t._v("compileJava")]),t._v(". The "),o("code",[t._v("compileTestJava")]),t._v(" task further looks for Java test source files in the default "),o("code",[t._v("src/test/java")]),t._v(" directory.")]),t._v(" "),o("p",[t._v("Groovy's Gradle plugin extends the Java plugin's compilation and looks for source files in the directory "),o("code",[t._v("src/main/groovy")]),t._v(" when executing "),o("code",[t._v("compileGroovy")]),t._v(". The "),o("code",[t._v("compileTestGroovy")]),t._v(" task looks for test source files in the "),o("code",[t._v("src/test/groovy")]),t._v("directory.")]),t._v(" "),o("p",[t._v("If you move your Java files over to "),o("code",[t._v("src/main/groovy")]),t._v(" as described in the second solution they will be handled by the Groovy plugin. The Groovy plugin uses "),o("code",[t._v("groovyc")]),t._v(", the Groovy compiler. It makes use of the "),o("a",{attrs:{href:"http://groovy-lang.org/groovyc.html#section-jointcompilation",target:"_blank",rel:"noopener noreferrer"}},[o("em",[t._v("joint compilation")]),o("OutboundLink")],1),t._v(" feature which allows you to mix and match Groovy and Java code in the Groovy SourceSet directories. For example, a Groovy class can extend a Java class that in turn extends a Groovy class. You can have dependencies in both directions and choose the best language for the job. Furthermore, you can incrementally rewrite and migrate any class to the other language if needed.")]),t._v(" "),o("p",[t._v("If you change the Groovy SourceSet as described in the first solution, the joint-compilation takes effect in both the default "),o("code",[t._v("src/main/groovy")]),t._v(" and the added "),o("code",[t._v("src/main/java")]),t._v(" directory. It doesn't matter which directory you put the Java and Groovy files in.")]),t._v(" "),o("hr"),t._v(" "),o("p",[t._v("If you want to try it on your own, I have prepared a "),o("a",{attrs:{href:"https://github.com/JonasHavers/groovier-java-compilation",target:"_blank",rel:"noopener noreferrer"}},[t._v("sample project on Github"),o("OutboundLink")],1),t._v(" that you can use as a reference.")])])},[],!1,null,null,null);e.default=r.exports}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{248:function(t,a,n){"use strict";n.r(a);var s=n(2),e=Object(s.a)({},function(){var t=this,a=t.$createElement,n=t._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("h1",{attrs:{id:"how-to-check-your-java-dependencies-for-owasp-vulnerabilities-and-security-issues"}},[t._v("How to check your Java dependencies for OWASP vulnerabilities and security issues")]),t._v(" "),n("p",[t._v("The OWASP "),n("a",{attrs:{href:"https://jeremylong.github.io/DependencyCheck/",target:"_blank",rel:"noopener noreferrer"}},[t._v("dependency-check"),n("OutboundLink")],1),t._v("\nprovides monitoring of the libraries you use in your Java project to identify\nthe use of known vulnerable components.")]),t._v(" "),n("p",[t._v("It produces an individual analysis report for the issue of “"),n("a",{attrs:{href:"https://www.owasp.org/index.php/Top_10-2017_A9-Using_Components_with_Known_Vulnerabilities",target:"_blank",rel:"noopener noreferrer"}},[t._v("Using Components\nwith Known\nVulnerabilities"),n("OutboundLink")],1),t._v("”\nwhich is listed in "),n("a",{attrs:{href:"https://www.owasp.org/index.php/Top_10-2017_Top_10",target:"_blank",rel:"noopener noreferrer"}},[t._v("the OWASP Top Ten\n2017"),n("OutboundLink")],1),t._v(".")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"gradle-plugin"}},[t._v("Gradle plugin")]),t._v(" "),n("p",[t._v("The "),n("a",{attrs:{href:"https://jeremylong.github.io/DependencyCheck/dependency-check-gradle/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gradle\nplugin"),n("OutboundLink")],1),t._v("\ncan create a report of known vulnerable components that are included in the\nbuild of your project. You include it in your "),n("em",[t._v("build.gradle")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("buildscript "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    repositories "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),n("span",{attrs:{class:"token function"}},[t._v("mavenCentral")]),n("span",{attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    dependencies "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        classpath "),n("span",{attrs:{class:"token string"}},[t._v("'org.owasp:dependency-check-gradle:3.1.2'")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\napply plugin"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'org.owasp.dependencycheck'")]),t._v("\n")])])]),n("p",[t._v("Afterwards you should integrate the check into your build system by using the\ncommand:")]),t._v(" "),n("div",{staticClass:"language-bash extra-class"},[n("pre",{pre:!0,attrs:{class:"language-bash"}},[n("code",[t._v("./gradlew dependencyCheckAnalyze\n")])])]),n("hr"),t._v(" "),n("h2",{attrs:{id:"integration-with-gitlab-ci"}},[t._v("Integration with Gitlab CI")]),t._v(" "),n("p",[t._v("If you are using Gitlab CI and you do not want to execute the check on every CI\nbuild, because your dependencies do not change that often and the check itself\ncan take a few minutes depending on the libraries you are using, you can\n"),n("a",{attrs:{href:"https://docs.gitlab.com/ce/user/project/pipelines/schedules.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("schedule a\npipeline"),n("OutboundLink")],1),t._v(" in\nyour project and restrict the task’s execution to that scheduled (nightly)\nbuild. Here is an excerpt for your "),n("em",[t._v(".gitlab-ci.yml")]),t._v(" file that you place in your\nproject root folder:")]),t._v(" "),n("div",{staticClass:"language-yaml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{attrs:{class:"token key atrule"}},[t._v("stages")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" dependencyCheck\n  "),n("span",{attrs:{class:"token comment"}},[t._v("# etc.")]),t._v("\n\n"),n("span",{attrs:{class:"token key atrule"}},[t._v("dependencyCheck")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),n("span",{attrs:{class:"token key atrule"}},[t._v("stage")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dependencyCheck\n  "),n("span",{attrs:{class:"token key atrule"}},[t._v("only")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" schedules\n  "),n("span",{attrs:{class:"token key atrule"}},[t._v("script")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ./gradlew dependencyCheckAnalyze\n  "),n("span",{attrs:{class:"token key atrule"}},[t._v("artifacts")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[t._v("name")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v('"${CI_JOB_ID}_${CI_JOB_NAME}"')]),t._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[t._v("when")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" always\n    "),n("span",{attrs:{class:"token key atrule"}},[t._v("expire_in")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 30 day\n    "),n("span",{attrs:{class:"token key atrule"}},[t._v("paths")]),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" build/reports/dependency"),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("check"),n("span",{attrs:{class:"token punctuation"}},[t._v("-")]),t._v("report.html\n")])])]),n("p",[t._v("When executed, the plugin will create the dependency check HTML report and\nGitlab will archive it for 30 days.")]),t._v(" "),n("hr"),t._v(" "),n("h2",{attrs:{id:"configurations"}},[t._v("Configurations")]),t._v(" "),n("p",[t._v("You can "),n("a",{attrs:{href:"https://jeremylong.github.io/DependencyCheck/dependency-check-gradle/configuration.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("configure the gradle\nplugin"),n("OutboundLink")],1),t._v("\nby applying a closure in your "),n("em",[t._v("build.gradle")]),t._v(" like the one below that will fail\nthe build when a "),n("a",{attrs:{href:"https://www.first.org/cvss/",target:"_blank",rel:"noopener noreferrer"}},[t._v("CVSS score"),n("OutboundLink")],1),t._v(" equal to or above a\nlevel 5 is identified:")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencyCheck "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  failBuildOnCVSS "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token number"}},[t._v("5")]),t._v("\n  failOnError "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  suppressionFile "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'config/dependencyCheck/suppressions.xml'")]),t._v("\n  analyzers "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    experimentalEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    archiveEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    jarEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    centralEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    nexusEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    pyDistributionEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    pyPackageEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    rubygemsEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    opensslEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    nuspecEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    assemblyEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    cmakeEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    autoconfEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    composerEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    nodeEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n    nspEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    cocoapodsEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n    swiftEnabled "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("Personally, I like to put configurations like this one in separate files (e.g.\nin "),n("em",[t._v("gradle/plugins")]),t._v(") and apply their contents to the "),n("em",[t._v("build.gradle")]),t._v(" like this:")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("apply from"),n("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{attrs:{class:"token string gstring"}},[t._v('"gradle/plugins/dependency-check.gradle"')]),t._v("\n")])])]),n("hr"),t._v(" "),n("h2",{attrs:{id:"suppressions"}},[t._v("Suppressions")]),t._v(" "),n("p",[t._v("In the configuration example above I defined my path to a suppression file\nrelative to the "),n("em",[t._v("build.gradle")]),t._v(":")]),t._v(" "),n("div",{staticClass:"language-groovy extra-class"},[n("pre",{pre:!0,attrs:{class:"language-groovy"}},[n("code",[t._v("dependencyCheck "),n("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  suppressionFile "),n("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),n("span",{attrs:{class:"token string"}},[t._v("'config/dependencyCheck/suppressions.xml'")]),t._v("\n"),n("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),n("p",[t._v("In "),n("em",[t._v("config/dependencyCheck/suppressions.xml")]),t._v(" I can define which warnings should\nbe ignored. This way I can define "),n("a",{attrs:{href:"https://jeremylong.github.io/DependencyCheck/general/suppression.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("False\nPositives"),n("OutboundLink")],1),t._v("\nor known (minor) issues I want or have to ignore until a dependency update.\nExample:")]),t._v(" "),n("div",{staticClass:"language-xml extra-class"},[n("pre",{pre:!0,attrs:{class:"language-xml"}},[n("code",[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("xml")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("version")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("1.0"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("encoding")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("UTF-8"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("suppressions")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("xmlns")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://jeremylong.github.io/DependencyCheck/dependency-suppression.1.1.xsd"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("suppress")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("notes")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),n("span",{attrs:{class:"token cdata"}},[t._v("<![CDATA[\n  file name: async-http-client-netty-utils-2.1.0-alpha25.jar\n  ]]>")]),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("notes")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("gav")]),t._v(" "),n("span",{attrs:{class:"token attr-name"}},[t._v("regex")]),n("span",{attrs:{class:"token attr-value"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("=")]),n("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("true"),n("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("^org\\.asynchttpclient:async-http-client-netty-utils:.*$"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("gav")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n      "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("cve")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("CVE-2014-3488"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("cve")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("suppress")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token tag"}},[n("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("suppressions")]),n("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])]),n("p",[t._v("You can also create hints for "),n("a",{attrs:{href:"https://jeremylong.github.io/DependencyCheck/general/hints.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("False\nNegatives"),n("OutboundLink")],1),t._v(".")])])},[],!1,null,null,null);a.default=e.exports}}]);